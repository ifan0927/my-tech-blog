---
title: "Building Automated Hugo Content Pipeline with n8n and Claude AI"
date: "2025-11-25"
tags: ["n8n", "automation", "hugo", "claude-ai", "workflow", "docker"]
categories: ["DevOps", "Automation"]
---

Today's focus was on establishing an automated workflow using n8n to streamline the daily note generation process, integrating Claude AI for content enhancement and automatic Hugo site deployment.

## Project Overview

The main objective was to eliminate manual steps in the daily note publishing workflow. Currently, the process involves manually transforming AI-processed notes into Hugo posts and handling repository updates. The solution leverages n8n to create an automated pipeline that reads local notes, enhances them with Claude AI, formats them for Hugo, and pushes changes to GitHub.

## Docker Configuration

Set up n8n in a Docker environment with volume mapping to access local development notes:

```yaml
version: '3'
services:
  n8n:
    image: n8nio/n8n
    ports:
      - "5678:5678"
    volumes:
      - ~/.n8n:/home/node/.n8n
      - /Users/cheni-fan/n8n:/files
    environment:
      - N8N_BASIC_AUTH_ACTIVE=true
      - N8N_BASIC_AUTH_USER=admin
      - N8N_BASIC_AUTH_PASSWORD=password
```

The volume mapping `/Users/cheni-fan/n8n:/files` enables n8n's Read File node to access local note files. A Code node handles date-based file selection to retrieve the current day's notes.

## Workflow Implementation

### Content Processing Pipeline

The workflow consists of three main components:

1. **File Reading**: Read File node retrieves daily notes from the mapped volume
2. **AI Enhancement**: Anthropic node processes content through Claude AI
3. **Content Formatting**: Code node handles post-processing and GitHub preparation

### Post-Processing Code

```javascript
// 取得輸入資料
const inputData = $input.item.json;
let content = inputData.content[0].text;

// 1. 移除  標籤
content = content.replace(/<\/?markdown_output>/g, '');

// 2. 將 
 字串轉換為真正的換行符號
content = content.replace(/\
/g, '
');

// 3. 清理前後空白
content = content.trim();

// 4. 從 frontmatter 提取資訊來生成檔案名稱
const dateMatch = content.match(/date:\s*"?(\d{4}-\d{2}-\d{2})/);
const titleMatch = content.match(/title:\s*"([^"]+)"/);

// 5. 生成檔案名稱 (slug)
let fileName = '';
if (dateMatch && titleMatch) {
  const date = dateMatch[1];
  fileName = `${date}_Note.md`;
} else {
  // 備用方案: 使用時間戳
  const timestamp = new Date().toISOString().split('T')[0];
  fileName = `${timestamp}-post.md`;
}

// 6. 設定檔案路徑 
const filePath = `content/posts/${fileName}`;

// 7. 準備 commit message
const commitMessage = titleMatch 
  ? `Add post: ${titleMatch[1]}` 
  : `Add new post: ${fileName}`;

// 8. 輸出給 GitHub 節點使用
return {
  json: {
    fileContent: content,
    filePath: filePath,
    commitMessage: commitMessage,
    fileName: fileName
  }
};
```

## Key Features

**Content Sanitization**: The code handles markdown tag removal, newline conversion, and content trimming to ensure clean output format.

**Dynamic File Naming**: Generates appropriate filenames based on frontmatter extraction, with fallback mechanisms for edge cases.

**GitHub Integration**: Automatically commits and pushes formatted content to the Hugo repository using the GitHub node.

## Solution Benefits

This automated pipeline eliminates several manual steps:
- No manual file creation in Hugo posts directory
- Automated content formatting and cleanup
- Seamless Git operations with descriptive commit messages
- Consistent file naming conventions

The workflow transforms raw development notes into publication-ready Hugo posts while maintaining content quality through Claude AI enhancement.